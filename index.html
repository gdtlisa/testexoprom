<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exercice Interactif Prompting - Atprom</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --navy: #0a194e; --yellow: #fcd45c; --teal: #227c7d; 
            --pink: #e91e9e; --green: #a6e27e; --red: #ff4d4d;
            --light-teal: #8ec5c6; --light-pink: #f4a7d6; --light-yellow: #fef08a;
            --gray-bubble: #e5e7eb;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: #f4f7f6;
            margin: 0; padding: 0;
            display: flex; justify-content: center; min-height: 100vh;
        }

        /* Système de verrouillage */
        #login-screen {
            position: fixed; inset: 0; background: var(--navy);
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            z-index: 1000; color: white;
        }
        #login-screen input {
            padding: 12px; border-radius: 8px; border: none; margin: 20px 0; width: 250px;
            font-size: 1rem; text-align: center;
        }

        .container {
            max-width: 1100px; width: 95%; background: white;
            margin: 20px; padding: 40px; border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            display: none; position: relative;
        }

        h2 { color: var(--navy); border-left: 5px solid var(--teal); padding-left: 15px; }

        /* Frise de progression */
        .frise {
            display: flex; margin-bottom: 40px; border-radius: 10px; overflow: hidden;
            height: 40px; box-shadow: 0 4px 6px rgba(0,0,0,0.05);
        }
        .frise-step {
            flex: 1; display: flex; align-items: center; justify-content: center;
            font-size: 0.75rem; font-weight: bold; color: white; opacity: 0.3;
            transition: 0.3s; text-transform: uppercase;
        }
        .frise-step.active { opacity: 1; }

        /* Grilles et Boutons */
        .grid-3 { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin: 30px 0; }
        .card {
            background: #fff; border: 2px solid #eee; padding: 25px;
            border-radius: 15px; cursor: pointer; transition: 0.3s; text-align: center;
            font-weight: 600; color: var(--navy);
        }
        .card:hover { transform: translateY(-5px); border-color: var(--teal); box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        .card.selected { background: var(--teal); color: white; border-color: var(--teal); }

        /* Blocs de prompt (Etape 3 & 4) */
        .prompt-blocks { display: flex; flex-wrap: wrap; gap: 15px; justify-content: center; margin-top: 20px; }
        .block-wrapper { display: flex; flex-direction: column; align-items: center; width: 200px; }
        .block-box {
            width: 100%; height: 100px; border-radius: 10px; padding: 10px;
            display: flex; align-items: center; justify-content: center;
            font-size: 0.85rem; text-align: center; box-sizing: border-box;
        }
        .block-box textarea {
            width: 100%; height: 100%; border: none; background: transparent;
            resize: none; font-family: inherit; font-size: 0.8rem; text-align: center;
        }
        .block-label { font-weight: bold; margin-top: 10px; color: #333; }
        .block-hint { font-size: 0.75rem; font-style: italic; color: #666; margin-top: 5px; }

        /* Bulles de chat (Etape 6) */
        .chat-container { display: flex; flex-wrap: wrap; gap: 20px; justify-content: center; }
        .chat-bubble-item { width: 300px; }
        .bubble {
            background: var(--gray-bubble); padding: 20px; border-radius: 20px 20px 20px 5px;
            position: relative; margin-bottom: 10px; min-height: 60px;
        }
        .bubble::after {
            content: ''; position: absolute; bottom: 0; left: -10px;
            width: 0; height: 0; border: 10px solid transparent;
            border-right-color: var(--gray-bubble); border-bottom-color: var(--gray-bubble);
        }
        .btn-check-group { display: flex; gap: 10px; justify-content: center; }
        .btn-verify { padding: 8px 15px; border-radius: 20px; border: 1px solid #ccc; cursor: pointer; font-size: 0.8rem; background: white; }
        .btn-verify.active-correct { background: var(--green); color: white; border-color: var(--green); }
        .btn-verify.active-incorrect { background: var(--red); color: white; border-color: var(--red); }

        /* Etape 8 */
        .problem-row { background: #f9f9f9; padding: 20px; border-radius: 15px; margin-bottom: 20px; border-left: 5px solid var(--navy); }
        select { width: 100%; padding: 10px; border-radius: 8px; margin-top: 10px; font-family: 'Poppins'; }

        .nav-btns { display: flex; justify-content: space-between; margin-top: 40px; }
        button.primary {
            background: var(--navy); color: white; border: none; padding: 12px 30px;
            border-radius: 30px; cursor: pointer; font-weight: bold; transition: 0.3s;
        }
        button.primary:hover { background: var(--teal); transform: scale(1.05); }
        
        .result-box { margin-top: 15px; font-weight: bold; padding: 10px; border-radius: 8px; text-align: center; display: none; }

        .hidden { display: none; }
    </style>
</head>
<body>

<div id="login-screen">
    <h1>Accès à l'exercice</h1>
    <input type="password" id="pass" placeholder="Entrez le mot de passe">
    <button class="primary" onclick="checkPass()">Se connecter</button>
</div>

<div class="container" id="main">
    <div class="frise">
        <div class="frise-step active" id="f1" style="background:var(--navy)">1. Problème</div>
        <div class="frise-step" id="f2" style="background:var(--yellow); color: #333">2. Technique</div>
        <div class="frise-step" id="f3" style="background:var(--teal)">3. Message</div>
        <div class="frise-step" id="f4" style="background:var(--pink)">4. Correction</div>
        <div class="frise-step" id="f5" style="background:var(--navy)">5. Théorie</div>
        <div class="frise-step" id="f6" style="background:var(--green); color: #333">6. Quiz Bulles</div>
        <div class="frise-step" id="f7" style="background:var(--yellow); color: #333">7. Catégories</div>
        <div class="frise-step" id="f8" style="background:var(--teal)">8. Match Final</div>
    </div>

    <section id="step1">
        <h2>Choisissez un problème à résoudre</h2>
        <div class="grid-3">
            <div class="card" onclick="selectProblem(1)">Problème 1</div>
            <div class="card" onclick="selectProblem(2)">Problème 2</div>
            <div class="card" onclick="selectProblem(3)">Problème 3</div>
        </div>
    </section>

    <section id="step2" class="hidden">
        <h2>Choisissez une technique de prompt</h2>
        <div class="grid-3" id="technique-options"></div>
    </section>

    <section id="step3" class="hidden">
        <h2>Écriture du message pour résoudre le problème</h2>
        <div class="prompt-blocks" id="input-blocks"></div>
    </section>

    <section id="step4" class="hidden">
        <h2>Exemple / "Correction"</h2>
        <div class="prompt-blocks" id="correction-blocks"></div>
    </section>

    <section id="step5" class="hidden">
        <h2>Un peu de théorie...</h2>
        <div class="problem-row" style="border-left: 10px solid var(--teal); background: #fff;">
            <p><strong>Problème :</strong> point sur lequel on s'interroge, question qui prête à discussion, qui fait l'objet d'argumentations, de théories diverses, en particulier dans le domaine de la connaissance : <em>Le problème de l'origine de l'homme.</em></p>
        </div>
    </section>

    <section id="step6" class="hidden">
        <h2>Bon/mauvais message</h2>
        <div class="chat-container" id="chat-quiz"></div>
        <button class="primary" style="margin: 20px auto; display: block;" onclick="validateStep6()">Vérifier les messages</button>
        <div id="score6" class="result-box"></div>
    </section>

    <section id="step7" class="hidden">
        <h2>Classification des techniques</h2>
        <div class="grid-3">
            <div class="card" style="border-top: 10px solid var(--green);"><h3>Simple</h3><p>Technique 1, 2, 3</p></div>
            <div class="card" style="border-top: 10px solid var(--yellow);"><h3>Intermédiaire</h3><p>Technique 4, 5, 6</p></div>
            <div class="card" style="border-top: 10px solid var(--pink);"><h3>Complexe</h3><p>Technique 7, 8, 9</p></div>
        </div>
    </section>

    <section id="step8" class="hidden">
        <h2>Quel problème pour quelle technique ?</h2>
        <div id="final-match">
            <div class="problem-row">
                <strong>Problème 1 :</strong>
                <select id="match1" multiple size="3">
                    <option value="1">Technique 1</option><option value="2">Technique 2</option><option value="3">Technique 3</option>
                    <option value="4">Technique 4</option><option value="5">Technique 5</option><option value="6">Technique 6</option>
                    <option value="7">Technique 7</option><option value="8">Technique 8</option><option value="9">Technique 9</option>
                </select>
                <p style="font-size: 0.7rem; color: #666;">(Maintenez Ctrl pour en choisir plusieurs)</p>
            </div>
            <div class="problem-row">
                <strong>Problème 2 :</strong>
                <select id="match2" multiple size="3">
                    <option value="1">Technique 1</option><option value="2">Technique 2</option><option value="3">Technique 3</option>
                    <option value="4">Technique 4</option><option value="5">Technique 5</option><option value="6">Technique 6</option>
                    <option value="7">Technique 7</option><option value="8">Technique 8</option><option value="9">Technique 9</option>
                </select>
            </div>
            <div class="problem-row">
                <strong>Problème 3 :</strong>
                <select id="match3" multiple size="3">
                    <option value="1">Technique 1</option><option value="2">Technique 2</option><option value="3">Technique 3</option>
                    <option value="4">Technique 4</option><option value="5">Technique 5</option><option value="6">Technique 6</option>
                    <option value="7">Technique 7</option><option value="8">Technique 8</option><option value="9">Technique 9</option>
                </select>
            </div>
        </div>
        <button class="primary" style="margin: 20px auto; display: block;" onclick="validateStep8()">Vérifier le matching</button>
        <div id="score8" class="result-box"></div>
    </section>

    <div class="nav-btns">
        <button class="primary" id="prevBtn" onclick="changeStep(-1)" disabled>Précédent</button>
        <button class="primary" id="nextBtn" onclick="changeStep(1)">Suivant</button>
    </div>
</div>

<script>
    let currentStep = 1;
    let selectedProblem = null;
    let selectedTechnique = null;

    const techniquesData = {
        1: { name: "Technique 1", blocks: ["Animal", "Métier", "Objet", "Couleur", "Musique", "Verbe"] },
        2: { name: "Technique 2", blocks: ["Objet", "Couleur", "Musique", "Verbe"] },
        3: { name: "Technique 3", blocks: ["Métier", "Animal", "Verbe"] },
        4: { name: "Technique 4", blocks: ["Objet", "Maison", "Verbe", "Couleur"] },
        5: { name: "Technique 5", blocks: ["Technologie", "Couleur", "Maison", "Musique", "Verbe", "Sujet"] },
        6: { name: "Technique 6", blocks: ["Sujet", "Technologie", "Paramètre", "Musique", "Objet"] },
        7: { name: "Technique 7", blocks: ["Technologie", "Paramètre", "Musique", "Objet"] },
        8: { name: "Technique 8", blocks: ["Couleur", "Objet", "Technologie", "Maison", "Paramètre", "Animal"] },
        9: { name: "Technique 9", blocks: ["Animal", "Couleur", "Paramètre"] }
    };

    const hints = {
        "Animal": "c'est un animal", "Métier": "c'est un métier", "Objet": "c'est un objet",
        "Couleur": "c'est une couleur", "Musique": "c'est une musique", "Verbe": "c'est un verbe",
        "Maison": "c'est une maison", "Paramètre": "c'est un paramètre", 
        "Technologie": "c'est une technologie", "Sujet": "c'est un sujet"
    };

    const blockColors = {
        "Technologie": "#8ec5c6", "Paramètre": "#a6e27e", "Musique": "#f4a7d6", 
        "Objet": "#fef08a", "Animal": "#fcd45c", "Métier": "#8ec5c6", "Verbe": "#f4a7d6", 
        "Couleur": "#fef08a", "Maison": "#a6e27e", "Sujet": "#fcd45c"
    };

    const corrections = {
        "1-1": ["Je suis une chèvre", "qui est médecin", "avec une peluche", "de couleur rouge", "qui fait de la musique jazz", "pour rigoler"],
        "1-2": ["Je suis une peluche", "de couleur grise", "qui joue de la guitare", "en rigolant"],
        "1-3": ["Je suis un jardinier", "qui a un chien", "rigolo"],
        "2-4": ["Je suis une peluche", "dans une grande maison", "qui est sale", "et est marron"],
        "2-5": ["Je suis une télévision", "de couleur noire", "dans une petite maison", "où il y a du rock", "on ne s'ennuie pas", "chez Lisa"],
        "2-6": ["Je suis Lisa", "j'adore la télévision", "avec un grand écran", "où je peux écouter du rap", "en utilisant mon téléphone"],
        "3-7": ["Je suis un téléphone", "très petit", "on ne peut pas écouter de la musique avec moi", "car je ne suis pas une enceinte"],
        "3-8": ["Je suis rouge", "de la forme d'un ballon", "avec un écran", "je me trouve dans le salon", "je suis petit", "les chiens m'adorent"],
        "3-9": ["Je suis un chien", "de couleur rouge", "je suis très grand"]
    };

    const chatData = [
        { t: "Je suis un loup", c: true }, { t: "Je suis une chèvre", c: false },
        { t: "Je suis un chien", c: true }, { t: "Je suis un castor", c: true },
        { t: "Je suis un mouton", c: false }, { t: "Je suis une vache", c: true },
        { t: "Je suis un chat", c: false }
    ];

    function checkPass() {
        if(document.getElementById('pass').value === "Atprom.2026.2") {
            document.getElementById('login-screen').style.display = 'none';
            document.getElementById('main').style.display = 'block';
        } else { alert("Mot de passe incorrect"); }
    }

    function selectProblem(p) {
        selectedProblem = p;
        const container = document.getElementById('technique-options');
        container.innerHTML = '';
        const range = p === 1 ? [1,2,3] : p === 2 ? [4,5,6] : [7,8,9];
        range.forEach(t => {
            const div = document.createElement('div');
            div.className = 'card';
            div.innerText = 'Technique ' + t;
            div.onclick = () => selectTechnique(t);
            container.appendChild(div);
        });
        changeStep(1);
    }

    function selectTechnique(t) {
        selectedTechnique = t;
        const inputContainer = document.getElementById('input-blocks');
        const correctContainer = document.getElementById('correction-blocks');
        inputContainer.innerHTML = ''; correctContainer.innerHTML = '';

        techniquesData[t].blocks.forEach((b, i) => {
            // Bloc Saisie
            const wrap = document.createElement('div');
            wrap.className = 'block-wrapper';
            wrap.innerHTML = `<div class="block-box" style="background:${blockColors[b]}"><textarea placeholder="Écrivez ici..."></textarea></div>
                              <div class="block-label">${b}</div><div class="block-hint">${hints[b]}</div>`;
            inputContainer.appendChild(wrap);

            // Bloc Correction
            const wrapCorr = document.createElement('div');
            wrapCorr.className = 'block-wrapper';
            const text = corrections[`${selectedProblem}-${t}`][i];
            wrapCorr.innerHTML = `<div class="block-box" style="background:${blockColors[b]}">${text}</div>
                                  <div class="block-label">${b}</div>`;
            correctContainer.appendChild(wrapCorr);
        });
        changeStep(1);
    }

    function initChat() {
        const container = document.getElementById('chat-quiz');
        container.innerHTML = '';
        chatData.forEach((m, i) => {
            const div = document.createElement('div');
            div.className = 'chat-bubble-item';
            div.innerHTML = `<div class="bubble">${m.t}</div>
                <div class="btn-check-group">
                    <button class="btn-verify" id="c${i}" onclick="setChatAns(${i}, true)">Correct</button>
                    <button class="btn-verify" id="i${i}" onclick="setChatAns(${i}, false)">Incorrect</button>
                </div>`;
            container.appendChild(div);
        });
    }

    let chatAnswers = {};
    function setChatAns(idx, val) {
        chatAnswers[idx] = val;
        document.getElementById('c'+idx).className = val ? 'btn-verify active-correct' : 'btn-verify';
        document.getElementById('i'+idx).className = !val ? 'btn-verify active-incorrect' : 'btn-verify';
    }

    function validateStep6() {
        let score = 0;
        chatData.forEach((m, i) => { if(chatAnswers[i] === m.c) score++; });
        const res = document.getElementById('score6');
        res.style.display = 'block';
        res.style.background = score > 4 ? '#dcfce7' : '#fee2e2';
        res.innerText = `Note : ${score} / 7`;
    }

    function validateStep8() {
        let score = 0;
        const r1 = Array.from(document.getElementById('match1').selectedOptions).map(o => o.value);
        const r2 = Array.from(document.getElementById('match2').selectedOptions).map(o => o.value);
        const r3 = Array.from(document.getElementById('match3').selectedOptions).map(o => o.value);
        
        if(r1.every(v => ['1','2','3'].includes(v)) && r1.length > 0) score++;
        if(r2.every(v => ['4','5','6'].includes(v)) && r2.length > 0) score++;
        if(r3.every(v => ['7','8','9'].includes(v)) && r3.length > 0) score++;

        const res = document.getElementById('score8');
        res.style.display = 'block';
        res.style.background = score === 3 ? '#dcfce7' : '#fee2e2';
        res.innerText = `Note : ${score} / 3`;
    }

    function changeStep(dir) {
        document.getElementById('step' + currentStep).classList.add('hidden');
        currentStep += dir;
        document.getElementById('step' + currentStep).classList.remove('hidden');
        
        document.getElementById('prevBtn').disabled = currentStep === 1;
        document.getElementById('nextBtn').classList.toggle('hidden', currentStep === 8);
        
        document.querySelectorAll('.frise-step').forEach((s, i) => {
            s.classList.toggle('active', i < currentStep);
        });

        if(currentStep === 6) initChat();
    }
</script>
</body>
</html>
